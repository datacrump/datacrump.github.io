<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>How to burn money with S3 | Data Crump</title><meta name="description" content="S3 Bucket versioning is one of the best features provided by AWS it&#x27;s also one of the best ways to burn your budget"/><meta property="og:Image" content="https://www.datacrump.com/assets/s3/bucket-versioning/title_cover.png"/><meta name="next-head-count" content="5"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="apple-touch-icon" sizes="76x76" href="/img/apple-icon.png"/><meta name="theme-color" content="#000000"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/0b93949e975fb0af.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0b93949e975fb0af.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-fd1bc4a65a80e5c8.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-18053c3f67c4d467.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5a911b8c60e19416.js" defer=""></script><script src="/_next/static/chunks/977-17d7ebde89cdb1ea.js" defer=""></script><script src="/_next/static/chunks/480-02f9bab404896991.js" defer=""></script><script src="/_next/static/chunks/874-6e655e0ef296a203.js" defer=""></script><script src="/_next/static/chunks/656-b1e19b8f20ff9256.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bcategory%5D/%5Bslug%5D-c059e1e2be6d8df3.js" defer=""></script><script src="/_next/static/0gyHKXd8ssfWsuTqX7aZp/_buildManifest.js" defer=""></script><script src="/_next/static/0gyHKXd8ssfWsuTqX7aZp/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons">@font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/materialicons/v139/flUhRq6tzZclQEJ-Vdg-IuiaDsNa.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Me5g.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlvAA.woff) format('woff')}@font-face{font-family:'Roboto Slab';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotoslab/v24/BngbUXZYTXPIvIBgJJSb6s3BzlRRfKOFbvjojISWaw.woff) format('woff')}@font-face{font-family:'Roboto Slab';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/robotoslab/v24/BngbUXZYTXPIvIBgJJSb6s3BzlRRfKOFbvjoa4OWaw.woff) format('woff')}.material-icons{font-family:'Material Icons';font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;font-feature-settings:'liga'}@font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/materialicons/v139/flUhRq6tzZclQEJ-Vdg-IuiaDsNcIhQ8tQ.woff2) format('woff2')}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Slab';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotoslab/v24/BngMUXZYTXPIvIBgJJSb6ufA5qWr4xCCQ_k.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Slab';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotoslab/v24/BngMUXZYTXPIvIBgJJSb6ufJ5qWr4xCCQ_k.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Slab';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotoslab/v24/BngMUXZYTXPIvIBgJJSb6ufB5qWr4xCCQ_k.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Slab';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotoslab/v24/BngMUXZYTXPIvIBgJJSb6ufO5qWr4xCCQ_k.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Slab';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotoslab/v24/BngMUXZYTXPIvIBgJJSb6ufC5qWr4xCCQ_k.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Slab';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotoslab/v24/BngMUXZYTXPIvIBgJJSb6ufD5qWr4xCCQ_k.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Slab';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotoslab/v24/BngMUXZYTXPIvIBgJJSb6ufN5qWr4xCC.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Slab';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/robotoslab/v24/BngMUXZYTXPIvIBgJJSb6ufA5qWr4xCCQ_k.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Slab';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/robotoslab/v24/BngMUXZYTXPIvIBgJJSb6ufJ5qWr4xCCQ_k.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Slab';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/robotoslab/v24/BngMUXZYTXPIvIBgJJSb6ufB5qWr4xCCQ_k.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Slab';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/robotoslab/v24/BngMUXZYTXPIvIBgJJSb6ufO5qWr4xCCQ_k.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Slab';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/robotoslab/v24/BngMUXZYTXPIvIBgJJSb6ufC5qWr4xCCQ_k.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Slab';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/robotoslab/v24/BngMUXZYTXPIvIBgJJSb6ufD5qWr4xCCQ_k.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Slab';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/robotoslab/v24/BngMUXZYTXPIvIBgJJSb6ufN5qWr4xCC.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.material-icons{font-family:'Material Icons';font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}</style></head><body><div id="__next"><style data-emotion="css-global o6gwfi">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:rgba(0, 0, 0, 0.87);font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;background-color:#fff;}@media print{body{background-color:#fff;}}body::backdrop{background-color:#fff;}</style><style data-emotion="css 1x7fv1x">.css-1x7fv1x{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:static;background-color:#2e7d32;color:#fff;}</style><style data-emotion="css h9a59x">.css-h9a59x{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;box-shadow:0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:static;background-color:#2e7d32;color:#fff;}</style><header class="MuiPaper-root MuiPaper-elevation MuiPaper-elevation4 MuiAppBar-root MuiAppBar-colorPrimary MuiAppBar-positionStatic css-h9a59x"><style data-emotion="css 1ekb41w">.css-1ekb41w{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;display:block;padding-left:16px;padding-right:16px;}@media (min-width:600px){.css-1ekb41w{padding-left:24px;padding-right:24px;}}@media (min-width:1536px){.css-1ekb41w{max-width:1536px;}}</style><div class="MuiContainer-root MuiContainer-maxWidthXl css-1ekb41w"><style data-emotion="css 12o98wt">.css-12o98wt{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:56px;}@media (min-width:0px){@media (orientation: landscape){.css-12o98wt{min-height:48px;}}}@media (min-width:600px){.css-12o98wt{min-height:64px;}}</style><div class="MuiToolbar-root MuiToolbar-regular css-12o98wt"><style data-emotion="css 19aihql">.css-19aihql{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}@media (min-width:0px){.css-19aihql{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}</style><div class="MuiBox-root css-19aihql"></div><style data-emotion="css 1t5p3ue">.css-1t5p3ue{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1.5rem;line-height:1.334;letter-spacing:0em;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:inherit;margin-right:16px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;font-family:monospace;font-weight:700;letter-spacing:.3rem;-webkit-text-decoration:none;text-decoration:none;}@media (min-width:0px){.css-1t5p3ue{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}</style><a class="MuiTypography-root MuiTypography-h5 MuiTypography-noWrap css-1t5p3ue" href="/">DataCrump</a></div></div></header><style data-emotion="css 1nl0624">.css-1nl0624{padding-bottom:56px;}</style><div class="MuiBox-root css-1nl0624"><style data-emotion="css 1qsxih2">.css-1qsxih2{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;display:block;padding-left:16px;padding-right:16px;}@media (min-width:600px){.css-1qsxih2{padding-left:24px;padding-right:24px;}}@media (min-width:1200px){.css-1qsxih2{max-width:1200px;}}</style><div class="MuiContainer-root MuiContainer-maxWidthLg css-1qsxih2"><style data-emotion="css o3d33y">.css-o3d33y{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;color:rgba(0, 0, 0, 0.6);}</style><nav class="MuiTypography-root MuiTypography-body1 MuiBreadcrumbs-root css-o3d33y" aria-label="breadcrumb"><style data-emotion="css nhb8h9">.css-nhb8h9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0;margin:0;list-style:none;}</style><ol class="MuiBreadcrumbs-ol css-nhb8h9"><li class="MuiBreadcrumbs-li"><style data-emotion="css cwb3pd">.css-cwb3pd{-webkit-text-decoration:none;text-decoration:none;color:inherit;}.css-cwb3pd:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><style data-emotion="css 1n4g9ka">.css-1n4g9ka{margin:0;color:inherit;-webkit-text-decoration:none;text-decoration:none;color:inherit;}.css-1n4g9ka:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover css-1n4g9ka" href="/">Data Crump</a></li><style data-emotion="css 3mf706">.css-3mf706{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-left:8px;margin-right:8px;}</style><li aria-hidden="true" class="MuiBreadcrumbs-separator css-3mf706">/</li><li class="MuiBreadcrumbs-li"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover css-1n4g9ka" href="/posts/aws">AWS crump</a></li><li aria-hidden="true" class="MuiBreadcrumbs-separator css-3mf706">/</li><li class="MuiBreadcrumbs-li"><style data-emotion="css nbfzex">.css-nbfzex{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;color:rgba(0, 0, 0, 0.87);}</style><p class="MuiTypography-root MuiTypography-body1 css-nbfzex">How to burn money with S3</p></li></ol></nav></div><style data-emotion="css 1peg4es">.css-1peg4es{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;width:100%;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding:24px;}</style><div class="MuiGrid-root MuiGrid-container css-1peg4es"><div class="MuiContainer-root MuiContainer-maxWidthLg css-1qsxih2"><h1>How to burn money with S3</h1><style data-emotion="css 39bbo6">.css-39bbo6{margin:0;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;border-width:0;border-style:solid;border-color:rgba(0, 0, 0, 0.12);border-bottom-width:thin;}</style><hr class="MuiDivider-root MuiDivider-fullWidth css-39bbo6"/><style data-emotion="css vu7j52">.css-vu7j52{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;width:100%;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;margin-top:-16px;width:calc(100% + 16px);margin-left:-16px;padding:24px;}.css-vu7j52>.MuiGrid-item{padding-top:16px;}.css-vu7j52>.MuiGrid-item{padding-left:16px;}</style><div class="MuiGrid-root MuiGrid-container MuiGrid-spacing-xs-2 css-vu7j52"><style data-emotion="css 11d57x6">.css-11d57x6{box-sizing:border-box;margin:0;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}@media (min-width:600px){.css-11d57x6{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}}@media (min-width:900px){.css-11d57x6{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}}@media (min-width:1200px){.css-11d57x6{-webkit-flex-basis:66.666667%;-ms-flex-preferred-size:66.666667%;flex-basis:66.666667%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:66.666667%;}}@media (min-width:1536px){.css-11d57x6{-webkit-flex-basis:66.666667%;-ms-flex-preferred-size:66.666667%;flex-basis:66.666667%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:66.666667%;}}</style><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-12 MuiGrid-grid-lg-8 css-11d57x6"><style data-emotion="css vuzb25">.css-vuzb25{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;border-radius:4px;box-shadow:0px 3px 3px -2px rgba(0,0,0,0.2),0px 3px 4px 0px rgba(0,0,0,0.14),0px 1px 8px 0px rgba(0,0,0,0.12);}</style><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation3 css-vuzb25"><div class="MuiContainer-root MuiContainer-maxWidthLg css-1qsxih2"><img src="/assets/s3/bucket-versioning/title_cover.png"/><div>S3 Bucket versioning is one of the best features provided by AWS it&#x27;s also one of the best ways to burn your budget</div><div class="postContent"><h2>S3 bucket versioning - budget burner</h2>
<p>This is how AWS presents bucket versioning.</p>
<blockquote>
<p>Versioning in Amazon S3 is a means of keeping multiple variants of an object in the same bucket. You can use the S3 Versioning feature to preserve, retrieve, and restore every version of every object stored in your buckets.</p>
</blockquote>
<p>A key point here <strong>is a means of keeping multiple variants of an object</strong>  as you know for each object stored in S3 you need to pay $0.023 GB / month.</p>
<blockquote>
<p>It might look like a small price, however, if you are using S3 as data lake storage - you not talking gigabytes anymore. Right!</p>
</blockquote>
<p>Let me run an experiment so you would not have to!</p>
<h2>enable bucketing</h2>
<p>Bucket versioning is enabled when you are creating a bucket. You can also enable versioning under the properties of a created bucket.</p>
<p><img src="/assets/s3/bucket-versioning/versioning.png" alt="creat bucket"></p>
<h2>working with versioning</h2>
<p>A bucket with versioning enabled is not anyhow different from a bucket without it. So you might not even know if the bucket has versioning enabled or not at first glance.</p>
<h3>object upload</h3>
<p>Let's say we have the following object</p>
<p><img src="/assets/s3/bucket-versioning/gang.png" alt="my gang"></p>
<p>Let's upload this object to the object store multiple times and see how it works.</p>
<p><img src="/assets/s3/bucket-versioning/copy_objects.png" alt="my gang"></p>
<p>As you see I have uploaded this object twice however I only see single object in S3. Great!</p>
<h3>deleteing objects</h3>
<p>Let's say we decided to delete our object because we do not need it anymore:</p>
<p><img src="/assets/s3/bucket-versioning/delete.png" alt="s3 console"></p>
<p>Let's check the S3 console
<img src="/assets/s3/bucket-versioning/delete_console_3.png" alt="s3 console"></p>
<p>If you stop here you might think this is great! Don't forget amazon promised to keep all the versions... so if you toggle <strong>Show versions</strong> you will see all your objects are still in the bucket event the one you have deleted.</p>
<p><img src="/assets/s3/bucket-versioning/delete_console_2.png" alt="s3 console"></p>
<blockquote>
<p>This is expected behavior it's definitely not an issue.</p>
</blockquote>
<p>In my opinion, it is very easy to miss deleted objects which could lead to an increase in your storage and eventually cost. We pay for all the storage we used in S3.</p>
<h2>how to check if you have this issue</h2>
<p>In the real world, it might be tricky to see all the object versions inside a bucket. So how would one find these hidden objects?</p>
<h3>storage Lens</h3>
<p>Storage Lens - is a service from AWS which collects statistical information about your bucket, and in my experience, this is one of the best ways to identify problematic buckets.</p>
<p>Go to your buckets and you will see <strong>Account Snapshot</strong> on the right side there will be a button <strong>View Storage Lens dashboard</strong>
<img src="/assets/s3/bucket-versioning/account_snapshot.png" alt="storage lens"></p>
<p>In the dashboard select <strong>Bucket</strong>
<img src="/assets/s3/bucket-versioning/dashboard_1.png" alt="my gang"></p>
<p>Scroll down to bucket list and instead os summary select <strong>Cost efficiency</strong></p>
<p><img src="/assets/s3/bucket-versioning/cost_efficiency.png" alt="my gang"></p>
<p>Here you will see all your buckets, metric you are looking for is: <strong>Noncurrent version bytes</strong> if this metric is more than zero you might be having some old data hiding around.</p>
<p>As you can see in my case my bucket is using 6MB of current and 6 times more (36MB) noncurrent objects. I would be paying for a total of 42MB of storage.</p>
<h2>cleaning data, handling your budget</h2>
<p>Once again AWS is doing what it promised to do by saving all the versions of your data in a bucket.</p>
<p>I think you will agree with me very often we do not need to keep all the versions of an object, I do see some use cases then we must keep all the versions however my "gang" isn't one of these things :)</p>
<h3>lifecycle policy</h3>
<p>Let's update the lifecycle policy to remove all the object which was deleted and only keep a single version (in case we would need to restore)</p>
<p>So to delete noncurrent version objects you need to select an option: <strong>Permanently delete noncurrent versions of objects</strong> and specify the number of days after how much you would like to delete noncurrent objects also you can optionally specify the number of versions you would like to keep.</p>
<p>My setup: delete all noncurrent version objects after 1 day (minimum) and keep a single object.</p>
<p><img src="/assets/s3/bucket-versioning/lifecycle_1.png" alt="my gang">
<img src="/assets/s3/bucket-versioning/lifecycle_2.png" alt="my gang"></p>
<p>It takes time (up to 24h) for the lifecycle policy to trigger, however after some time final result is.</p>
<p>I still have deleted objects (because I asked for 1 version to be kept) this way my storage cost for S3 will not grow unexpectedly.</p>
<p><img src="/assets/s3/bucket-versioning/whats_left.png" alt="my gang"></p>
<h2>summary</h2>
<p>Bucket versioning is a powerful feature. If you need to keep all versions of the data this feature will save hours of development work.</p>
<p>If you need to use this feature gor for it, however as always think what should be your data retention policies.</p>
<p>Rule of thumb:
Create a lifecycle policy the moment you are creating bucket - this way you will not need to worry about unexpected costs.</p>
</div></div></div></div><style data-emotion="css 1px0r2z">.css-1px0r2z{box-sizing:border-box;margin:0;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}@media (min-width:600px){.css-1px0r2z{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}}@media (min-width:900px){.css-1px0r2z{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}}@media (min-width:1200px){.css-1px0r2z{-webkit-flex-basis:33.333333%;-ms-flex-preferred-size:33.333333%;flex-basis:33.333333%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:33.333333%;}}@media (min-width:1536px){.css-1px0r2z{-webkit-flex-basis:33.333333%;-ms-flex-preferred-size:33.333333%;flex-basis:33.333333%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:33.333333%;}}</style><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-12 MuiGrid-grid-lg-4 css-1px0r2z"><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation3 css-vuzb25"><div class="MuiContainer-root MuiContainer-maxWidthLg css-1qsxih2">Share on social media:<br/><button aria-label="facebook" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><style data-emotion="css 6flbmm">.css-6flbmm{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:2.1875rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge css-6flbmm" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="FacebookIcon"><path d="M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m13 2h-2.5A3.5 3.5 0 0 0 12 8.5V11h-2v3h2v7h3v-7h3v-3h-3V9a1 1 0 0 1 1-1h2V5z"></path></svg></button><button aria-label="twitter" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge css-6flbmm" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="TwitterIcon"><path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"></path></svg></button><div class="MuiBox-root css-0"></div></div></div></div></div></div></div></div><style data-emotion="css 1ez9utm">.css-1ez9utm{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;border-radius:4px;box-shadow:0px 3px 3px -2px rgba(0,0,0,0.2),0px 3px 4px 0px rgba(0,0,0,0.14),0px 1px 8px 0px rgba(0,0,0,0.12);position:fixed;bottom:0;left:0;right:0;}</style><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation3 css-1ez9utm"><style data-emotion="css de1c49">.css-de1c49{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;height:56px;background-color:#fff;}</style><div class="MuiBottomNavigation-root css-de1c49"><style data-emotion="css c0kgxy">.css-c0kgxy{-webkit-transition:color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,padding-top 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,padding-top 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:0px 12px;min-width:80px;max-width:168px;color:rgba(0, 0, 0, 0.6);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex:1;-ms-flex:1;flex:1;padding-top:14px;}.css-c0kgxy.Mui-selected{color:#2e7d32;}</style><style data-emotion="css 1i67uv0">.css-1i67uv0{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;-webkit-transition:color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,padding-top 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,padding-top 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:0px 12px;min-width:80px;max-width:168px;color:rgba(0, 0, 0, 0.6);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex:1;-ms-flex:1;flex:1;padding-top:14px;}.css-1i67uv0::-moz-focus-inner{border-style:none;}.css-1i67uv0.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-1i67uv0{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-1i67uv0.Mui-selected{color:#2e7d32;}</style><a class="MuiButtonBase-root MuiBottomNavigationAction-root MuiBottomNavigationAction-iconOnly css-1i67uv0" tabindex="0" href="https://github.com/datacrump"><style data-emotion="css vubbuv">.css-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="GitHubIcon"><path d="M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"></path></svg><style data-emotion="css 58b16v">.css-58b16v{font-family:"Roboto","Helvetica","Arial",sans-serif;font-size:0.75rem;opacity:0;-webkit-transition:font-size 0.2s,opacity 0.2s;transition:font-size 0.2s,opacity 0.2s;transition-delay:0s;}.css-58b16v.Mui-selected{font-size:0.875rem;}</style><span class="MuiBottomNavigationAction-label MuiBottomNavigationAction-iconOnly css-58b16v">GitHub</span></a><a class="MuiButtonBase-root MuiBottomNavigationAction-root MuiBottomNavigationAction-iconOnly css-1i67uv0" tabindex="0" href="https://twitter.com/datacrump"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="TwitterIcon"><path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"></path></svg><span class="MuiBottomNavigationAction-label MuiBottomNavigationAction-iconOnly css-58b16v">Twitter</span></a><a class="MuiButtonBase-root MuiBottomNavigationAction-root MuiBottomNavigationAction-iconOnly css-1i67uv0" tabindex="0" href="https://www.facebook.com/datacrump"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="FacebookIcon"><path d="M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m13 2h-2.5A3.5 3.5 0 0 0 12 8.5V11h-2v3h2v7h3v-7h3v-3h-3V9a1 1 0 0 1 1-1h2V5z"></path></svg><span class="MuiBottomNavigationAction-label MuiBottomNavigationAction-iconOnly css-58b16v">Facebook</span></a><a class="MuiButtonBase-root MuiBottomNavigationAction-root MuiBottomNavigationAction-iconOnly css-1i67uv0" tabindex="0" href="https://www.instagram.com/datacrump/"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="InstagramIcon"><path d="M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path></svg><span class="MuiBottomNavigationAction-label MuiBottomNavigationAction-iconOnly css-58b16v">Instagram</span></a></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"slug":"bucket-versioning","category":{"slug":"aws","title":"AWS crump","excerpt":"Place for topics related to AWS","coverImage":"/assets/blog/preview/cover.jpg","content":"","top":true},"title":"How to burn money with S3","excerpt":"S3 Bucket versioning is one of the best features provided by AWS it's also one of the best ways to burn your budget","coverImage":"/assets/s3/bucket-versioning/title_cover.png","cardImage":"/assets/s3/bucket-versioning/title_card.png","date":"2022-10-10T12:36:35.000Z","contentPath":"/aws/bucket-versioning.md","content":"\u003ch2\u003eS3 bucket versioning - budget burner\u003c/h2\u003e\n\u003cp\u003eThis is how AWS presents bucket versioning.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eVersioning in Amazon S3 is a means of keeping multiple variants of an object in the same bucket. You can use the S3 Versioning feature to preserve, retrieve, and restore every version of every object stored in your buckets.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eA key point here \u003cstrong\u003eis a means of keeping multiple variants of an object\u003c/strong\u003e  as you know for each object stored in S3 you need to pay $0.023 GB / month.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIt might look like a small price, however, if you are using S3 as data lake storage - you not talking gigabytes anymore. Right!\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eLet me run an experiment so you would not have to!\u003c/p\u003e\n\u003ch2\u003eenable bucketing\u003c/h2\u003e\n\u003cp\u003eBucket versioning is enabled when you are creating a bucket. You can also enable versioning under the properties of a created bucket.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/s3/bucket-versioning/versioning.png\" alt=\"creat bucket\"\u003e\u003c/p\u003e\n\u003ch2\u003eworking with versioning\u003c/h2\u003e\n\u003cp\u003eA bucket with versioning enabled is not anyhow different from a bucket without it. So you might not even know if the bucket has versioning enabled or not at first glance.\u003c/p\u003e\n\u003ch3\u003eobject upload\u003c/h3\u003e\n\u003cp\u003eLet's say we have the following object\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/s3/bucket-versioning/gang.png\" alt=\"my gang\"\u003e\u003c/p\u003e\n\u003cp\u003eLet's upload this object to the object store multiple times and see how it works.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/s3/bucket-versioning/copy_objects.png\" alt=\"my gang\"\u003e\u003c/p\u003e\n\u003cp\u003eAs you see I have uploaded this object twice however I only see single object in S3. Great!\u003c/p\u003e\n\u003ch3\u003edeleteing objects\u003c/h3\u003e\n\u003cp\u003eLet's say we decided to delete our object because we do not need it anymore:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/s3/bucket-versioning/delete.png\" alt=\"s3 console\"\u003e\u003c/p\u003e\n\u003cp\u003eLet's check the S3 console\n\u003cimg src=\"/assets/s3/bucket-versioning/delete_console_3.png\" alt=\"s3 console\"\u003e\u003c/p\u003e\n\u003cp\u003eIf you stop here you might think this is great! Don't forget amazon promised to keep all the versions... so if you toggle \u003cstrong\u003eShow versions\u003c/strong\u003e you will see all your objects are still in the bucket event the one you have deleted.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/s3/bucket-versioning/delete_console_2.png\" alt=\"s3 console\"\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThis is expected behavior it's definitely not an issue.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eIn my opinion, it is very easy to miss deleted objects which could lead to an increase in your storage and eventually cost. We pay for all the storage we used in S3.\u003c/p\u003e\n\u003ch2\u003ehow to check if you have this issue\u003c/h2\u003e\n\u003cp\u003eIn the real world, it might be tricky to see all the object versions inside a bucket. So how would one find these hidden objects?\u003c/p\u003e\n\u003ch3\u003estorage Lens\u003c/h3\u003e\n\u003cp\u003eStorage Lens - is a service from AWS which collects statistical information about your bucket, and in my experience, this is one of the best ways to identify problematic buckets.\u003c/p\u003e\n\u003cp\u003eGo to your buckets and you will see \u003cstrong\u003eAccount Snapshot\u003c/strong\u003e on the right side there will be a button \u003cstrong\u003eView Storage Lens dashboard\u003c/strong\u003e\n\u003cimg src=\"/assets/s3/bucket-versioning/account_snapshot.png\" alt=\"storage lens\"\u003e\u003c/p\u003e\n\u003cp\u003eIn the dashboard select \u003cstrong\u003eBucket\u003c/strong\u003e\n\u003cimg src=\"/assets/s3/bucket-versioning/dashboard_1.png\" alt=\"my gang\"\u003e\u003c/p\u003e\n\u003cp\u003eScroll down to bucket list and instead os summary select \u003cstrong\u003eCost efficiency\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/s3/bucket-versioning/cost_efficiency.png\" alt=\"my gang\"\u003e\u003c/p\u003e\n\u003cp\u003eHere you will see all your buckets, metric you are looking for is: \u003cstrong\u003eNoncurrent version bytes\u003c/strong\u003e if this metric is more than zero you might be having some old data hiding around.\u003c/p\u003e\n\u003cp\u003eAs you can see in my case my bucket is using 6MB of current and 6 times more (36MB) noncurrent objects. I would be paying for a total of 42MB of storage.\u003c/p\u003e\n\u003ch2\u003ecleaning data, handling your budget\u003c/h2\u003e\n\u003cp\u003eOnce again AWS is doing what it promised to do by saving all the versions of your data in a bucket.\u003c/p\u003e\n\u003cp\u003eI think you will agree with me very often we do not need to keep all the versions of an object, I do see some use cases then we must keep all the versions however my \"gang\" isn't one of these things :)\u003c/p\u003e\n\u003ch3\u003elifecycle policy\u003c/h3\u003e\n\u003cp\u003eLet's update the lifecycle policy to remove all the object which was deleted and only keep a single version (in case we would need to restore)\u003c/p\u003e\n\u003cp\u003eSo to delete noncurrent version objects you need to select an option: \u003cstrong\u003ePermanently delete noncurrent versions of objects\u003c/strong\u003e and specify the number of days after how much you would like to delete noncurrent objects also you can optionally specify the number of versions you would like to keep.\u003c/p\u003e\n\u003cp\u003eMy setup: delete all noncurrent version objects after 1 day (minimum) and keep a single object.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/s3/bucket-versioning/lifecycle_1.png\" alt=\"my gang\"\u003e\n\u003cimg src=\"/assets/s3/bucket-versioning/lifecycle_2.png\" alt=\"my gang\"\u003e\u003c/p\u003e\n\u003cp\u003eIt takes time (up to 24h) for the lifecycle policy to trigger, however after some time final result is.\u003c/p\u003e\n\u003cp\u003eI still have deleted objects (because I asked for 1 version to be kept) this way my storage cost for S3 will not grow unexpectedly.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/s3/bucket-versioning/whats_left.png\" alt=\"my gang\"\u003e\u003c/p\u003e\n\u003ch2\u003esummary\u003c/h2\u003e\n\u003cp\u003eBucket versioning is a powerful feature. If you need to keep all versions of the data this feature will save hours of development work.\u003c/p\u003e\n\u003cp\u003eIf you need to use this feature gor for it, however as always think what should be your data retention policies.\u003c/p\u003e\n\u003cp\u003eRule of thumb:\nCreate a lifecycle policy the moment you are creating bucket - this way you will not need to worry about unexpected costs.\u003c/p\u003e\n","top":true,"visible":true,"tags":[{"slug":"s3","title":"AWS S3","excerpt":"","coverImage":"","content":""},{"slug":"aws","title":"AWS","excerpt":"","coverImage":"","content":""},{"slug":"budget","title":"Budget","excerpt":"","coverImage":"","content":""}]},"category":{"slug":"aws","title":"AWS crump","excerpt":"Place for topics related to AWS","coverImage":"/assets/blog/preview/cover.jpg","content":"","top":true},"posts":[]},"__N_SSG":true},"page":"/posts/[category]/[slug]","query":{"category":"aws","slug":"bucket-versioning"},"buildId":"0gyHKXd8ssfWsuTqX7aZp","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>